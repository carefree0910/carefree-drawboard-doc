<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/design-philosophy">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Design Philosophy | carefree-drawboard</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://carefree0910.me/carefree-drawboard-doc/docs/reference/design-philosophy"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design Philosophy | carefree-drawboard"><meta data-rh="true" name="description" content="carefree-drawboard üé® made assumptions that:"><meta data-rh="true" property="og:description" content="carefree-drawboard üé® made assumptions that:"><link data-rh="true" rel="icon" href="/carefree-drawboard-doc/./img/favicon.ico"><link data-rh="true" rel="canonical" href="https://carefree0910.me/carefree-drawboard-doc/docs/reference/design-philosophy"><link data-rh="true" rel="alternate" href="https://carefree0910.me/carefree-drawboard-doc/docs/reference/design-philosophy" hreflang="en"><link data-rh="true" rel="alternate" href="https://carefree0910.me/carefree-drawboard-doc/docs/reference/design-philosophy" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/carefree-drawboard-doc/blog/rss.xml" title="carefree-drawboard RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/carefree-drawboard-doc/blog/atom.xml" title="carefree-drawboard Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="/carefree-drawboard-doc/assets/css/styles.8c29a0ed.css">
<link rel="preload" href="/carefree-drawboard-doc/assets/js/runtime~main.7cd875f8.js" as="script">
<link rel="preload" href="/carefree-drawboard-doc/assets/js/main.b0236583.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like carefree-drawboard, give it a star on <a target="_blank" href="https://github.com/carefree0910/carefree-drawboard">GitHub</a>! ‚≠êÔ∏è</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/carefree-drawboard-doc/"><b class="navbar__title text--truncate">üé®</b></a><a class="navbar__item navbar__link" href="/carefree-drawboard-doc/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/carefree-drawboard-doc/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/carefree0910/carefree-drawboard" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/getting-started/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/plugins/">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/user-guides/features">User Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/contributing-guides/contributing">Contributing Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/api-reference/Types">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/carefree-drawboard-doc/docs/reference/design-philosophy">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/carefree-drawboard-doc/docs/reference/design-philosophy">Design Philosophy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carefree-drawboard-doc/docs/reference/terminology">Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carefree-drawboard-doc/docs/reference/middleware">Middleware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/carefree-drawboard-doc/docs/reference/brainstorm">Brainstorm</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/carefree-drawboard-doc/docs/about/update-logs">About</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/carefree-drawboard-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Design Philosophy</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Design Philosophy</h1></header><p><code>carefree-drawboard</code> üé® made assumptions that:</p><ul><li>It is a painful process to spend time thinking and designing the layout of various UIs.</li><li>Most user interactions can be abstracted into &quot;send something to server&quot; &amp; &quot;receive something to server&quot;.</li><li>A completely decoupled system is what we dreamed of, because it can be easily customized, extended and maintained.</li><li>An infinite drawboard is capable of building (almost) all the desired applications.</li></ul><p>So we derived the following design principles:</p><ul><li><strong>Everything</strong> is a <strong>plugin</strong> on an <strong>Infinite Drawboard</strong>.</li><li>Plugin Styles should be fully declarative and should contain a smart layout system (which should also be declarative).</li><li>Plugin Logics should only have access to the data from:<ul><li>Itself (e.g., some input fields declared by the Styles).</li><li>The selecting <a href="/carefree-drawboard-doc/docs/reference/terminology#node"><code>Node</code></a>(s).</li></ul></li></ul><p>Under these principles, no matter what programming languages (even <strong>JSON</strong>, if your plugins contain no logics) you are using, you can easily extend the functionality of <code>carefree-drawboard</code> üé® by writing plugins (see <a href="#extensibility">Extensibility</a> for more details).</p><p>And since:</p><ul><li>We love <code>Python</code>.</li></ul><p>So (currently) we provide a python binding, the <code>cfdraw</code> package, for you to write plugins (both styles and logics) using <code>Python</code>.</p><p>We&#x27;ll dive into the details of these principles in the following sections.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugins">Plugins<a href="#plugins" class="hash-link" aria-label="Direct link to Plugins" title="Direct link to Plugins">‚Äã</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>To see the design details of our plugins, see <a href="#design-details">Design Details</a>.</p></div></div><p>In order to achieve the principles, <code>carefree-drawboard</code> üé® designs a universal plugin paradigm which balanced functionality and flexibility. Specifically, our plugins will:</p><ol><li>Use declarative way to build itself. More specificly, <strong>EVERY</strong> plugin should be able to be constructed from a <strong>JSON</strong> data.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In this case, not only <code>Python</code>, but also any programming languages can access to <code>carefree-drawboard</code> üé® (see <a href="#extensibility">Extensibility</a> for more details)!</p></div></div><ol start="2"><li>Be presented on the drawboard üé® in the form of an icon button (or text button, if necessary). When we click on it, it will either trigger an event directly or expand a panel for further interactions.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Typically, the panel expanded here will be contain some input fields used to send some data to <code>Python</code>.</p></div></div><ol start="3"><li>Control their own position and determine whether they need to be displayed based on <a href="/carefree-drawboard-doc/docs/reference/terminology#pivot"><code>Pivot</code></a> and <a href="/carefree-drawboard-doc/docs/reference/terminology#node"><code>Node</code></a>. Here are two typical examples:</li></ol><ul><li>For some &quot;global&quot; plugins (such as the &quot;Settings&quot; plugin), we will anchor it in a corner <a href="/carefree-drawboard-doc/docs/reference/terminology#pivot"><code>Pivot</code></a> of the drawboard üé® (such as the upper right corner, <code>rt</code>) and keep it displayed no matter what.</li><li>For some &quot;specific&quot; plugins (such as plugins that can perform image processing), we want it to be displayed only when an <code>ImageNode</code> is selected, and we want it to <code>follow</code> a corner of the <code>ImageNode</code> (such as the upper right corner, <code>rt</code>).</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>See <a href="/carefree-drawboard-doc/docs/plugins#plugin-positioning">Plugin Positioning</a> for more details.</p></div></div><ol start="4"><li>Have a <a href="/carefree-drawboard-doc/docs/reference/middleware">Middleware</a> system that can facilitate our use. In short, <a href="/carefree-drawboard-doc/docs/reference/middleware">Middleware</a> can convert our &#x27;raw&#x27; results (e.g., <code>str</code>, <code>PIL.Image</code>, or list of them) into data structure we actually need.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extensibility">Extensibility<a href="#extensibility" class="hash-link" aria-label="Direct link to Extensibility" title="Direct link to Extensibility">‚Äã</a></h2><p><code>carefree-drawboard</code> üé® is designed to be extensible. It should be easy to migrate from <code>Python</code> to other (backend) programming languages, because all communications between frontend and backend are based on a static set of APIs.</p><p>In order to guide you to write your own plugins with your favorite programming languages, we&#x27;ll first show you the design details of our plugins (see <a href="#design-details">Design Details</a>), and then we&#x27;ll give you some references (see <a href="#references">References</a>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-details">Design Details<a href="#design-details" class="hash-link" aria-label="Direct link to Design Details" title="Direct link to Design Details">‚Äã</a></h2><p>In this section, we will introduce the design details of the plugin system, so you can know about why we can write plugins from backend side.</p><ol><li>The backend should wrap the <strong><a href="/carefree-drawboard-doc/docs/reference/terminology#styles">Styles</a></strong> and <strong><a href="/carefree-drawboard-doc/docs/reference/terminology#logics">Logics</a></strong> into a single <strong>class</strong> / <strong>struct</strong>.<ol><li>The <strong>Styles</strong> should be <strong>JSON</strong> serializable.</li><li>The <strong>Logics</strong> should be asynchronous functions that are responsible for sending intermediate progress / final results to the frontend.</li></ol></li><li>The backend should then &#x27;<strong>register</strong>&#x27; this class / struct to a global &#x27;<strong>factory</strong>&#x27; (e.g., our <a href="https://github.com/carefree0910/carefree-drawboard/blob/54c9821b13f25b124e465cbc2acd83c5bd1e607e/cfdraw/plugins/factory.py#L25" target="_blank" rel="noopener noreferrer"><code>PluginFactory</code></a>).<ol><li>You should assign the class / struct itself, not an instance of it. Instances should be created on the fly, so we don&#x27;t suffer from data sharing issues.</li><li>You should assign a unique <code>identifier</code> when registering.</li></ol></li><li>The backend should launch a WebSocket server, and a long-lasting connection will be established from the frontend to the backend. This connection will do the following things:<ol><li>The frontend will send a one-time &#x27;<strong>sync</strong>&#x27; request to the backend, and the backend should use the &#x27;<strong>factory</strong>&#x27; to generate a JSON data (e.g., with our <a href="https://github.com/carefree0910/carefree-drawboard/blob/ce2e6f82314b38d20fe245430c91029b12a9f795/cfdraw/schema/plugins.py#L258" target="_blank" rel="noopener noreferrer"><code>to_react</code></a> method) which tells the frontend how to render the plugins on the drawboard üé®.</li><li>The frontend will send a task request to the backend once users interact with the plugins. The task request is statically typed (<a href="/carefree-drawboard-doc/docs/api-reference/ISocketRequest"><code>ISocketRequest</code></a>) and will contain the <code>identifier</code> of the plugin, so the backend knows which plugin&#x27;s <strong>Logics</strong> should be executed.</li><li>During the execution, the backend will send intermediate progress / final results messages to the frontend. The messages should follow specific interface (<a href="/carefree-drawboard-doc/docs/api-reference/ISocketMessage"><code>ISocketMessage</code></a>), so it might be better to:<ol><li>Introduce a <a href="/carefree-drawboard-doc/docs/reference/middleware">Middleware</a> system.</li><li>Introduce some <a href="/carefree-drawboard-doc/docs/api-reference/Built-in-Methods">Built-in Methods</a>.</li></ol></li><li>The frontend will then render the progress / results on the drawboard üé®.</li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">‚Äã</a></h2><ul><li><p>The OpenAPI specification can be found at <code>http://localhost:8123/openapi.json</code>, if you start this project locally at <code>8123</code> port.</p></li><li><p>The <a href="https://github.com/carefree0910/carefree-drawboard/blob/dev/cfdraw/app/endpoints/websocket.py" target="_blank" rel="noopener noreferrer">websocket</a> source codes and the <a href="https://github.com/carefree0910/carefree-drawboard/blob/dev/cfdraw/plugins/_internal/sync.py" target="_blank" rel="noopener noreferrer"><code>SyncSocketPlugin</code></a> source codes. You can also see <a href="#sync">Sync</a> for a brief introduction of the underlying mechanism.</p></li><li><p>The plugins are designed to use:</p><ul><li><a href="/carefree-drawboard-doc/docs/api-reference/ISocketRequest"><code>ISocketRequest</code></a> as input message</li><li><a href="/carefree-drawboard-doc/docs/api-reference/ISocketMessage"><code>ISocketMessage</code></a> as response message</li></ul><p>to communicate between frontend and backend through an everlasting WebSocket connection, so once your backend can receive / send such (JSON) data structure from / to the frontend it should be all fine.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sync">Sync<a href="#sync" class="hash-link" aria-label="Direct link to Sync" title="Direct link to Sync">‚Äã</a></h2><p>One of the main difficulties of building <code>Python</code> (or, other backend programming languages) based web frameworks is the communication between frontend and backend. <code>carefree-drawboard</code> üé® tackles this problem by using WebSocket to communicate:</p><ol><li>The frontend will maintain a WebSocket connection to the backend, and poll for the settings. If the backend is dead, the frontend will also poll until the backend is alive again.</li><li>Once the settings are fetched, the frontend will check the hash of the settings. If the hash is different from the current one, the frontend will update the settings and re-render the drawboard üé®.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>I have to admit: Until 2023-04-15, I was using file system for the communication. It can start up fast but it was a terrible development experience.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-06-05T07:46:33.000Z">Jun 5, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/carefree-drawboard-doc/docs/api-reference/ISocketMessage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ISocketMessage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/carefree-drawboard-doc/docs/reference/terminology"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terminology</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#plugins" class="table-of-contents__link toc-highlight">Plugins</a></li><li><a href="#extensibility" class="table-of-contents__link toc-highlight">Extensibility</a></li><li><a href="#design-details" class="table-of-contents__link toc-highlight">Design Details</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li><li><a href="#sync" class="table-of-contents__link toc-highlight">Sync</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/carefree-drawboard-doc/docs/getting-started">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/carefree-drawboard-doc/docs/getting-started/installation/">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/carefree-drawboard-doc/docs/reference/design-philosophy/">Design Philosophy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/carefree0910/carefree-drawboard" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/carefree-drawboard-doc/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 carefree-drawboard, carefree0910. Built with Docusaurus.</div></div></div></footer></div>
<script src="/carefree-drawboard-doc/assets/js/runtime~main.7cd875f8.js"></script>
<script src="/carefree-drawboard-doc/assets/js/main.b0236583.js"></script>
</body>
</html>